/*
Deployment script for SimulationDB
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, QUOTED_IDENTIFIER ON;

SET CONCAT_NULL_YIELDS_NULL, NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "SimulationDB"
:setvar DefaultDataPath "J:\sql_db\"
:setvar DefaultLogPath "K:\sql_db\"

GO
:on error exit
GO
USE [master]
GO
USE [$(DatabaseName)]
GO
IF EXISTS (SELECT * FROM tempdb..sysobjects WHERE id=OBJECT_ID('tempdb..#tmpErrors')) DROP TABLE #tmpErrors
GO
CREATE TABLE #tmpErrors (Error int)
GO
SET XACT_ABORT ON
GO
SET TRANSACTION ISOLATION LEVEL READ COMMITTED
GO
BEGIN TRANSACTION
GO
PRINT N'Dropping [GadgetLoader.SqlServer].[SqlAssemblyProjectRoot]...';


GO
EXECUTE sp_dropextendedproperty @name = N'SqlAssemblyProjectRoot', @level0type = N'Assembly', @level0name = N'GadgetLoader.SqlServer';


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[MergePHkeys]...';


GO
DROP FUNCTION [dbo].[MergePHkeys];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[MergeSlots]...';


GO
DROP FUNCTION [dbo].[MergeSlots];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[CreatePHkeys]...';


GO
DROP FUNCTION [dbo].[CreatePHkeys];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [dbo].[CreateSlots]...';


GO
DROP FUNCTION [dbo].[CreateSlots];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Dropping [GadgetLoader.SqlServer]...';


GO
DROP ASSEMBLY [GadgetLoader.SqlServer];


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [GadgetLoader.SqlServer]...';


GO
CREATE ASSEMBLY [GadgetLoader.SqlServer]
    AUTHORIZATION [dbo]
    FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C01030084BAF8500000000000000000E00002210B010800000C000000060000000000001E2B0000002000000040000000004000002000000002000004000000000000000400000000000000008000000002000000000000030040850000100000100000000010000010000000000000100000000000000000000000CC2A00004F00000000400000F003000000000000000000000000000000000000006000000C000000282A00001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000240B000000200000000C000000020000000000000000000000000000200000602E72737263000000F00300000040000000040000000E0000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000001200000000000000000000000000004000004200000000000000000000000000000000002B00000000000048000000020005002821000000090000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013300300330000000100001100120002281000000A001200281100000A0B0703281200000A04281300000A9E07281400000A0D1203281500000A0C2B00082A0013300300330000000200001100120002281600000A001200281700000A0B0703281200000A04281200000A9D07281800000A0D1203281900000A0C2B00082A00133001001C00000003000011001F408D190000010A06281400000A0C1202281500000A0B2B00072A133001001C00000004000011001F408D1A0000010A06281800000A0C1202281900000A0B2B00072A1E02281A00000A2A42534A4201000100000000000C00000076322E302E35303732370000000005006C000000DC020000237E000048030000DC03000023537472696E6773000000002407000008000000235553002C0700001000000023475549440000003C070000C401000023426C6F620000000000000002000001475502000900000000FA253300160000010000001B0000000200000005000000060000001B000000100000000100000004000000010000000300000000000A0001000000000006004A0043000A0072005D000A007C005D000A0085005D0006000201F00006001901F00006003601F00006005501F00006006E01F00006008701F0000600A201F0000600BD01F0000600F501D60106000902F00006003E02220206005A02220206007C0269024700900200000600BF029F020600DF029F020A002F0314030E00580344030600780343000E00940344030600A50343000600AB0343000600C103B1030000000001000000000001000100010010002500000005000100010050200000000096008E000A00010090200000000096009A0015000400D020000000009600A50020000700F820000000009600B200200007002021000000008618BE002500070000000100C40000000200CE0000000300D60000000100DF0000000200CE0000000300E8002900BE0029003100BE0029003900BE0029004100BE0029004900BE0029005100BE0029005900BE0029006100BE0029006900BE002E007100BE0029007900BE0033008900BE0039009900BE003F00A100BE002500A900BE002500B100BE004900B10064034F0019006C03540021006C035A00B1007E036000B10088036700C100BE004900C10064037700C1007E037C00C100880367000900BE002500D900BE00250020007B0044002700DB0044002E001B00BC002E002B00A0002E006B00FB002E000B00A0002E001300BC002E002300C2002E00730004012E003300D1002E003B00BC002E004B00BC002E006300F20040007B00440060007B00440080007B0044000800060023016C0083008E00970004800000010000009D129A9A000000000000FD02000002000000000000000000000001003A0000000000020000000000000000000000010051000000000001000000480F4F4800000000000044030000000000000000003C4D6F64756C653E004761646765744C6F616465722E53716C5365727665722E646C6C0055736572446566696E656446756E6374696F6E73006D73636F726C69620053797374656D004F626A6563740053797374656D2E446174610053797374656D2E446174612E53716C54797065730053716C42696E6172790053716C496E7431360053716C496E743332004D6572676550486B657973004D65726765536C6F74730043726561746550486B65797300437265617465536C6F7473002E63746F72006F6C6450486B657973006E6577536E6170006E657750486B6579006F6C64536C6F7473006E6577536C6F740053797374656D2E5265666C656374696F6E00417373656D626C795469746C6541747472696275746500417373656D626C794465736372697074696F6E41747472696275746500417373656D626C79436F6E66696775726174696F6E41747472696275746500417373656D626C79436F6D70616E7941747472696275746500417373656D626C7950726F6475637441747472696275746500417373656D626C79436F7079726967687441747472696275746500417373656D626C7954726164656D61726B41747472696275746500417373656D626C7943756C747572654174747269627574650053797374656D2E52756E74696D652E496E7465726F70536572766963657300436F6D56697369626C6541747472696275746500417373656D626C7956657273696F6E4174747269627574650053797374656D2E53656375726974792E5065726D697373696F6E730053656375726974795065726D697373696F6E417474726962757465005365637572697479416374696F6E0053797374656D2E446961676E6F73746963730044656275676761626C6541747472696275746500446562756767696E674D6F6465730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C697479417474726962757465004761646765744C6F616465722E53716C536572766572004D6963726F736F66742E53716C5365727665722E5365727665720053716C46756E6374696F6E417474726962757465004A68752E53716C5365727665722E41727261790053716C496E74417272617900546F4172726179006F705F4578706C696369740041727261790046726F6D417272617900546F53716C4275666665720053716C536D616C6C496E74417272617900496E74333200496E7431360053797374656D2E536563757269747900556E76657269666961626C65436F646541747472696275746500000003200000000000E1EF539891A5504B8734215673FFD32C0008B77A5C561934E0890A000311091109110D11110A000311091109110D110D040000110903200001042001010E0420010102052001011141052001011149042001010804010000000520010111090420001D0805000106110D0500010811110600011159125D04200011090A070411591D08110911590420001D060600011161125D0A070411611D06110911610807031D08110911590807031D06110911611B0100164761646765744C6F616465722E53716C53657276657200000501000000000E0100094D6963726F736F667400002001001B436F7079726967687420C2A9204D6963726F736F6674203230313300000801000701000000000801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F777301809E2E01808453797374656D2E53656375726974792E5065726D697373696F6E732E53656375726974795065726D697373696F6E4174747269627574652C206D73636F726C69622C2056657273696F6E3D322E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038391501540210536B6970566572696669636174696F6E01000000000084BAF850000000000200000085000000442A0000440C0000525344537AD32D51EE3D2F43A41EE0C669101F8709000000433A5C55736572735C6372616E6B736861775C446F63756D656E74735C4769744875625C4761646765744C6F616465725C4761646765744C6F616465722E53716C5365727665725C6F626A5C44656275675C4761646765744C6F616465722E53716C5365727665722E70646200000000F42A000000000000000000000E2B0000002000000000000000000000000000000000000000000000002B0000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF25002040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000980300000000000000000000980334000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000001009A9A9D12000001009A9A9D123F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B004F8020000010053007400720069006E006700460069006C00650049006E0066006F000000D4020000010030003000300030003000340062003000000034000A00010043006F006D00700061006E0079004E0061006D006500000000004D006900630072006F0073006F00660074000000580017000100460069006C0065004400650073006300720069007000740069006F006E00000000004700610064006700650074004C006F0061006400650072002E00530071006C005300650072007600650072000000000040000F000100460069006C006500560065007200730069006F006E000000000031002E0030002E0034003700360035002E00330039003500370038000000000058001B00010049006E007400650072006E0061006C004E0061006D00650000004700610064006700650074004C006F0061006400650072002E00530071006C005300650072007600650072002E0064006C006C00000000005C001B0001004C006500670061006C0043006F007000790072006900670068007400000043006F0070007900720069006700680074002000A90020004D006900630072006F0073006F0066007400200032003000310033000000000060001B0001004F0072006900670069006E0061006C00460069006C0065006E0061006D00650000004700610064006700650074004C006F0061006400650072002E00530071006C005300650072007600650072002E0064006C006C0000000000500017000100500072006F0064007500630074004E0061006D006500000000004700610064006700650074004C006F0061006400650072002E00530071006C005300650072007600650072000000000044000F000100500072006F006400750063007400560065007200730069006F006E00000031002E0030002E0034003700360035002E00330039003500370038000000000048000F00010041007300730065006D0062006C0079002000560065007200730069006F006E00000031002E0030002E0034003700360035002E00330039003500370038000000000000000000000000000000000000000000002000000C000000203B00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
    WITH PERMISSION_SET = UNSAFE;


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Adding files to assembly [GadgetLoader.SqlServer]';


GO
ALTER ASSEMBLY [GadgetLoader.SqlServer]
    DROP FILE ALL
    ADD FILE FROM 0xEFBBBF7573696E672053797374656D3B0D0A7573696E672053797374656D2E446174613B0D0A7573696E672053797374656D2E446174612E53716C436C69656E743B0D0A7573696E672053797374656D2E446174612E53716C54797065733B0D0A7573696E67204D6963726F736F66742E53716C5365727665722E5365727665723B0D0A0D0A7573696E67204A68752E53716C5365727665722E41727261793B0D0A0D0A7075626C6963207061727469616C20636C6173732055736572446566696E656446756E6374696F6E730D0A7B0D0A202020202F2F204D657267650D0A202020205B4D6963726F736F66742E53716C5365727665722E5365727665722E53716C46756E6374696F6E5D0D0A202020207075626C6963207374617469632053716C42696E617279204D6572676550486B6579732853716C42696E617279206F6C6450486B6579732C2053716C496E743136206E6577536E61702C2053716C496E743332206E657750486B6579290D0A202020207B0D0A202020202020202053716C496E744172726179206B65794172726179203D206E65772053716C496E744172726179286F6C6450486B657973293B0D0A2020202020202020696E745B5D206B657973203D206B657941727261792E546F417272617928293B0D0A20202020202020206B6579735B2873686F727429206E6577536E61705D203D2028696E7429206E657750486B65793B0D0A202020202020202072657475726E2053716C496E7441727261792E46726F6D4172726179286B657973292E546F53716C42756666657228293B0D0A202020207D0D0A0D0A202020205B4D6963726F736F66742E53716C5365727665722E5365727665722E53716C46756E6374696F6E5D0D0A202020207075626C6963207374617469632053716C42696E617279204D65726765536C6F74732853716C42696E617279206F6C64536C6F74732C2053716C496E743136206E6577536E61702C2053716C496E743136206E6577536C6F74290D0A202020207B0D0A20202020202020202F2F73686F72745B5D20736C6F7473203D206F6C64536C6F74732E546F417272617928293B0D0A202020202020202053716C536D616C6C496E74417272617920736C6F744172726179203D206E65772053716C536D616C6C496E744172726179286F6C64536C6F7473293B0D0A202020202020202073686F72745B5D20736C6F7473203D20736C6F7441727261792E546F417272617928293B0D0A2020202020202020736C6F74735B2873686F727429206E6577536E61705D203D202873686F727429206E6577536C6F743B0D0A202020202020202072657475726E2053716C536D616C6C496E7441727261792E46726F6D417272617928736C6F7473292E546F53716C42756666657228293B0D0A202020207D0D0A0D0A202020202F2F204372656174650D0A202020205B4D6963726F736F66742E53716C5365727665722E5365727665722E53716C46756E6374696F6E5D0D0A202020207075626C6963207374617469632053716C42696E6172792043726561746550486B65797328290D0A202020207B0D0A2020202020202020696E745B5D206B657973203D206E657720696E745B36345D3B0D0A202020202020202072657475726E2053716C496E7441727261792E46726F6D4172726179286B657973292E546F53716C42756666657228293B0D0A202020207D0D0A0D0A202020205B4D6963726F736F66742E53716C5365727665722E5365727665722E53716C46756E6374696F6E5D0D0A202020207075626C6963207374617469632053716C42696E61727920437265617465536C6F747328290D0A202020207B0D0A202020202020202073686F72745B5D20736C6F7473203D206E65772073686F72745B36345D3B0D0A202020202020202072657475726E2053716C536D616C6C496E7441727261792E46726F6D417272617928736C6F7473292E546F53716C42756666657228293B0D0A202020207D0D0A202020200D0A0D0A7D3B0D0A0D0A AS N'MergeReverseIndex.cs', 0xEFBBBF7573696E672053797374656D2E5265666C656374696F6E3B0D0A7573696E672053797374656D2E52756E74696D652E436F6D70696C657253657276696365733B0D0A7573696E672053797374656D2E52756E74696D652E496E7465726F7053657276696365733B0D0A7573696E672053797374656D2E446174612E53716C3B0D0A0D0A2F2F2047656E6572616C20496E666F726D6174696F6E2061626F757420616E20617373656D626C7920697320636F6E74726F6C6C6564207468726F7567682074686520666F6C6C6F77696E670D0A2F2F20736574206F6620617474726962757465732E204368616E6765207468657365206174747269627574652076616C75657320746F206D6F646966792074686520696E666F726D6174696F6E0D0A2F2F206173736F636961746564207769746820616E20617373656D626C792E0D0A5B617373656D626C793A20417373656D626C795469746C6528224761646765744C6F616465722E53716C53657276657222295D0D0A5B617373656D626C793A20417373656D626C794465736372697074696F6E282222295D0D0A5B617373656D626C793A20417373656D626C79436F6E66696775726174696F6E282222295D0D0A5B617373656D626C793A20417373656D626C79436F6D70616E7928224D6963726F736F667422295D0D0A5B617373656D626C793A20417373656D626C7950726F6475637428224761646765744C6F616465722E53716C53657276657222295D0D0A5B617373656D626C793A20417373656D626C79436F707972696768742822436F7079726967687420C2A9204D6963726F736F6674203230313322295D0D0A5B617373656D626C793A20417373656D626C7954726164656D61726B282222295D0D0A5B617373656D626C793A20417373656D626C7943756C74757265282222295D0D0A0D0A5B617373656D626C793A20436F6D56697369626C652866616C7365295D0D0A0D0A2F2F0D0A2F2F2056657273696F6E20696E666F726D6174696F6E20666F7220616E20617373656D626C7920636F6E7369737473206F662074686520666F6C6C6F77696E6720666F75722076616C7565733A0D0A2F2F0D0A2F2F2020202020204D616A6F722056657273696F6E0D0A2F2F2020202020204D696E6F722056657273696F6E0D0A2F2F2020202020204275696C64204E756D6265720D0A2F2F2020202020205265766973696F6E0D0A2F2F0D0A2F2F20596F752063616E207370656369667920616C6C207468652076616C756573206F7220796F752063616E2064656661756C7420746865205265766973696F6E20616E64204275696C64204E756D626572730D0A2F2F206279207573696E672074686520272A272061732073686F776E2062656C6F773A0D0A5B617373656D626C793A20417373656D626C7956657273696F6E2822312E302E2A22295D0D0A0D0A AS N'Properties\AssemblyInfo.cs', 0x4D6963726F736F667420432F432B2B204D534620372E30300D0A1A445300000000020000020000001B000000980000000000000018000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000A0FCF3FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF18010CFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0BCA3101380000000010000000100000000000000C00FFFF0400000003800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F862513FC607D311905300C04FA302A1C4454B99E9E6D211903F00C04FA302A10B9D865A1166D311BD2A0000F80849BD60A66E40CF64824CB6F042D48172A799100000000000000065F63AACA242A9B07442BD720168E55F0600000015000000090000000A000000050000000B0000000C0000000D0000000E0000000F000000100000001400000011000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F862513FC607D311905300C04FA302A1C4454B99E9E6D211903F00C04FA302A10B9D865A1166D311BD2A0000F80849BD60A66E40CF64824CB6F042D48172A799100000000000000065F63AACA242A9B07442BD720168E55F0300000006000000150000000900000008000000040000000B0000000C0000000D0000000E0000000F00000010000000140000001100000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BCA310138000000001000000010000000000000FFFFFFFF040000000380000000000000FFFFFFFF00000000FFFFFFFF00000000FFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009E000000000000009E0000000000000000000000000000000000000000000000440200002C00000068000000FFFFFFFF28000000150000000300000006000000110000000900000008000000040000000B0000000C0000000D0000000E000000100000000F000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001BE2300180000000B52E50D0F0F4CD0108000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000020000000100000002000000000000005F000000280000001BE230018E229E7E58000000010000005E0000005F000000650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FEEFFEEF01000000BC00000000433A5C55736572735C6372616E6B736861775C446F63756D656E74735C4769744875625C4761646765744C6F616465725C4761646765744C6F616465722E53716C5365727665725C4D6572676552657665727365496E6465782E63730000633A5C75736572735C6372616E6B736861775C646F63756D656E74735C6769746875625C6761646765746C6F616465725C6761646765746C6F616465722E73716C7365727665725C6D6572676572657665727365696E6465782E63730004000000010000005E0000005F00000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001BE23001800000006D40A9CD27F5CD0109000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000020000000100000002000000000000005F000000280000001BE230018E229E7E58000000010000005E0000005F0000006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000036002A11000000009801000000000000330000000000000000000000010000060000000001000000004D6572676550486B657973000000001600031104000000640100003300000000000000010000000A0024115553797374656D00120024115553797374656D2E44617461000000001A0024115553797374656D2E446174612E53716C436C69656E7400001A0024115553797374656D2E446174612E53716C54797065730000001E002411554D6963726F736F66742E53716C5365727665722E536572766572001A002411554A68752E53716C5365727665722E4172726179000000001E002011020000000100001100000000000004004353243124303030300000001E002011030000000100001100000000000004004353243024303030310000001E002011000000000100001100000000000000006B65794172726179000000001A002011010000000100001100000000000000006B65797300000000020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040000000C000000010006000200060032002A11000000009802000000000000330000000000000000000000020000063300000001000000004D65726765536C6F747300160003119C010000640200003300000033000000010000001E002011020000000200001100000000000004004353243124303030300000001E002011030000000200001100000000000004004353243024303030310000001E00201100000000020000110000000000000000736C6F7441727261790000001A00201101000000020000110000000000000000736C6F7473000000020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D00440032000000040100000401E6160C000000010000060200060036002A11000000007C030000000000001C00000000000000000000000300000666000000010000000043726561746550486B657973000000160003119C020000480300001C00000066000000010000001E002011010000000300001100000000000004004353243124303030300000001E002011020000000300001100000000000004004353243024303030310000001A002011000000000300001100000000000000006B65797300000000020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D00440032000000040100000401E6160C000000010000060200060036002A110000000060040000000000001C000000000000000000000004000006820000000100000000437265617465536C6F74730000000016000311800300002C0400001C00000082000000010000001E002011010000000400001100000000000004004353243124303030300000001E002011020000000400001100000000000004004353243024303030310000001A00201100000000040000110000000000000000736C6F7473000000020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D00440032000000040100000401E6160C0000000100000602000600F200000060000000000000000100010033000000000000000600000054000000000000000E000080010000000F0000800A000000100000801200000011000080200000001200008031000000130000800500060009003B00090029000900300009003A0005000600F200000060000000330000000100010033000000000000000600000054000000000000001700008001000000190000800A0000001A000080120000001B000080200000001C000080310000001D000080050006000900450009002D00090032000900400005000600F20000004800000066000000010001001C00000000000000040000003C0000000000000022000080010000002300008009000000240000801A00000025000080050006000900220009003A0005000600F20000004800000082000000010001001C00000000000000040000003C0000000000000029000080010000002A000080090000002B0000801A0000002C00008005000600090027000900400005000600F400000008000000010000000000000020000000000000001C000000340000005000000068000000840000009C000000B8000000340000005000000068000000840000009C000000B80000000000000000000000000000000000000000000000000000000C0000001800000024000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFF1A092FF14000000024020000510000000100000085000000010000001D000000010000006900000001000000B90000000100000001000000010000009D000000010000003500000001000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C0000001800000024000000300000003C00000048000000540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001A002511000000000400000001004D6572676550486B6579730000001600291100000000040000000100303630303030303100001A002511000000009C01000001004D65726765536C6F74730000000016002911000000009C0100000100303630303030303200001A002511000000009C020000010043726561746550486B657973000016002911000000009C0200000100303630303030303300001A00251100000000800300000100437265617465536C6F7473000000160029110000000080030000010030363030303030340000000000000000000000000000020002000D01000000000100FFFFFFFF00000000660000000802000000000000FFFFFFFF00000000FFFFFFFF010001000000010000000000433A5C55736572735C6372616E6B736861775C446F63756D656E74735C4769744875625C4761646765744C6F616465725C4761646765744C6F616465722E53716C5365727665725C4D6572676552657665727365496E6465782E637300000000FEEFFEEF010000000100000000010000000000000000000000FFFFFFFFFFFFFFFFFFFF0F00FFFFFFFFFFFFFFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000094000000E200000038000000FFFFFFFF00000000E00000008000000058000000050000000300000006000000090000000800000004000000626C6F636B002F7372632F66696C65732F633A5C75736572735C6372616E6B736861775C646F63756D656E74735C6769746875625C6761646765746C6F616465725C6761646765746C6F616465722E73716C7365727665725C6D6572676572657665727365696E6465782E6373000400000006000000010000001E00000000000000110000000600000022000000070000000A00000005000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001200000018000000E200000038000000A301000000000000E0000000800000005800000028000000F8020000440200002C0000006800000003000000120000000600000011000000090000000A00000007000000080000000B0000000C0000000D0000000E000000100000000F00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000CC060000000068E90080FFFFFFFF1A092FF1000000000000000030303030303100001A002511000000009C01000001004D65726765536C6F74730000000016002911000000009C0100000100303630303030303200001A002511000000009C020000010043726561746550486B657973000016002911000000009C0200000100303630303030303300001A00251100000000800300000100437265617465536C6F7473000000160029110000000080030000010030363030303030340000000000000000000000000000020002000D01000000000100FFFFFFFF00000000660000000802000000000000FFFFFFFF00000000FFFFFFFF010001000000010000000000433A5C55736572735C6372616E6B736861775C446F63756D656E74735C4769744875625C4761646765744C6F616465725C4761646765744C6F616465722E53716C5365727665725C4D6572676552657665727365496E6465782E637300000000FEEFFEEF010000000100000000010000000000000000000000FFFFFFFFFFFFFFFFFFFF0F00FFFFFFFFFFFFFFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFF77093101090000000900008A0A006F760B00010060000000740000002C0000006C000000000000000000000016000000190000000000EEC00000000000000000FFFF000000000000FFFFFFFF00000000FFFF00000000000000000000000008006404000000000000800100000100000088C22803000000000000000055736572446566696E656446756E6374696F6E730037314141414545380000002DBA2EF1010000000000000033000000000000000000000000000000000000000100000033000000330000000000000000000000000000000000000001000000660000001C0000000000000000000000000000000000000001000000820000001C00000000000000000000000000000000000000020002000D01000000000100FFFFFFFF000000009E0000000802000000000000FFFFFFFF00000000FFFFFFFF010001000000010000000000433A5C55736572735C6372616E6B736861775C446F63756D656E74735C4769744875625C4761646765744C6F616465725C4761646765744C6F616465722E53716C5365727665725C4D6572676552657665727365496E6465782E637300000000FEEFFEEF010000000100000000010000000000000000000000FFFFFFFFFFFFFFFFFFFF1400FFFFFFFFFFFFFFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000000942E3101E1C6F550090000007AD32D51EE3D2F43A41EE0C669101F878A0000002F4C696E6B496E666F002F6E616D6573002F7372632F686561646572626C6F636B002F7372632F66696C65732F633A5C75736572735C6372616E6B736861775C646F63756D656E74735C6769746875625C6761646765746C6F616465725C6761646765746C6F616465722E73716C7365727665725C6D6572676572657665727365696E6465782E6373000400000006000000010000001E00000000000000110000000600000022000000070000000A0000000500000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000150000003C000000E200000038000000DB01000000000000E0000000800000005800000008060000740200002C000000D0000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF2800000012000000160000000600000015000000090000000A000000050000000B0000000C0000000D0000000E0000000F00000010000000140000001100000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 AS N'bin\Debug\GadgetLoader.SqlServer.pdb';


GO
PRINT N'Creating [dbo].[MergePHkeys]...';


GO
CREATE FUNCTION [dbo].[MergePHkeys]
(@oldPHkeys VARBINARY (8000), @newSnap SMALLINT, @newPHkey INT)
RETURNS VARBINARY (8000)
AS
 EXTERNAL NAME [GadgetLoader.SqlServer].[UserDefinedFunctions].[MergePHkeys]


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[MergeSlots]...';


GO
CREATE FUNCTION [dbo].[MergeSlots]
(@oldSlots VARBINARY (8000), @newSnap SMALLINT, @newSlot SMALLINT)
RETURNS VARBINARY (8000)
AS
 EXTERNAL NAME [GadgetLoader.SqlServer].[UserDefinedFunctions].[MergeSlots]


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[CreatePHkeys]...';


GO
CREATE FUNCTION [dbo].[CreatePHkeys]
( )
RETURNS VARBINARY (8000)
AS
 EXTERNAL NAME [GadgetLoader.SqlServer].[UserDefinedFunctions].[CreatePHkeys]


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[CreateSlots]...';


GO
CREATE FUNCTION [dbo].[CreateSlots]
( )
RETURNS VARBINARY (8000)
AS
 EXTERNAL NAME [GadgetLoader.SqlServer].[UserDefinedFunctions].[CreateSlots]


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [GadgetLoader.SqlServer].[SqlAssemblyProjectRoot]...';


GO
EXECUTE sp_addextendedproperty @name = N'SqlAssemblyProjectRoot', @value = N'C:\Users\crankshaw\Documents\GitHub\GadgetLoader\GadgetLoader.SqlServer', @level0type = N'Assembly', @level0name = N'GadgetLoader.SqlServer';


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[MergePHkeys].[SqlAssemblyFile]...';


GO
EXECUTE sp_addextendedproperty @name = N'SqlAssemblyFile', @value = N'MergeReverseIndex.cs', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'FUNCTION', @level1name = N'MergePHkeys';


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[MergePHkeys].[SqlAssemblyFileLine]...';


GO
EXECUTE sp_addextendedproperty @name = N'SqlAssemblyFileLine', @value = N'14', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'FUNCTION', @level1name = N'MergePHkeys';


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[MergeSlots].[SqlAssemblyFile]...';


GO
EXECUTE sp_addextendedproperty @name = N'SqlAssemblyFile', @value = N'MergeReverseIndex.cs', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'FUNCTION', @level1name = N'MergeSlots';


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[MergeSlots].[SqlAssemblyFileLine]...';


GO
EXECUTE sp_addextendedproperty @name = N'SqlAssemblyFileLine', @value = N'23', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'FUNCTION', @level1name = N'MergeSlots';


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[CreatePHkeys].[SqlAssemblyFile]...';


GO
EXECUTE sp_addextendedproperty @name = N'SqlAssemblyFile', @value = N'MergeReverseIndex.cs', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'FUNCTION', @level1name = N'CreatePHkeys';


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[CreatePHkeys].[SqlAssemblyFileLine]...';


GO
EXECUTE sp_addextendedproperty @name = N'SqlAssemblyFileLine', @value = N'34', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'FUNCTION', @level1name = N'CreatePHkeys';


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[CreateSlots].[SqlAssemblyFile]...';


GO
EXECUTE sp_addextendedproperty @name = N'SqlAssemblyFile', @value = N'MergeReverseIndex.cs', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'FUNCTION', @level1name = N'CreateSlots';


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
PRINT N'Creating [dbo].[CreateSlots].[SqlAssemblyFileLine]...';


GO
EXECUTE sp_addextendedproperty @name = N'SqlAssemblyFileLine', @value = N'41', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'FUNCTION', @level1name = N'CreateSlots';


GO
IF @@ERROR <> 0
   AND @@TRANCOUNT > 0
    BEGIN
        ROLLBACK;
    END

IF @@TRANCOUNT = 0
    BEGIN
        INSERT  INTO #tmpErrors (Error)
        VALUES                 (1);
        BEGIN TRANSACTION;
    END


GO
IF EXISTS (SELECT * FROM #tmpErrors) ROLLBACK TRANSACTION
GO
IF @@TRANCOUNT>0 BEGIN
PRINT N'The transacted portion of the database update succeeded.'
COMMIT TRANSACTION
END
ELSE PRINT N'The transacted portion of the database update failed.'
GO
DROP TABLE #tmpErrors
GO
